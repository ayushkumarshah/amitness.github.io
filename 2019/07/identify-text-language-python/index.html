<!DOCTYPE html>
<html lang="en">
<head prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#">
  <!-- Basic Metas -->
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width">
  <meta name="google-site-verification" content="xETphZ5K1WItiUzH0YMRgZ8njDZlQMcGd_HD3zxGkuI" />
  <meta name="p:domain_verify" content="907458af45983f47cfdffa284ee6ec03"/>
  <title>Identify the Language of Text using Python</title>
  <meta name="description" content="Learn how to predict the language of a given piece of text using Natural Language Processing.">
  <meta name="author" content="Amit Chaudhary">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.5/css/bulma.min.css">
    <link rel="stylesheet" href="https://amitness.com/theme/css/main.2c65ebea.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.0-beta/dist/katex.min.css" integrity="sha384-9tPv11A+glH/on/wEu99NVwDPwkMQESOocs/ZGXPoIiLE8MU/qkqUcZ3zzL+6DuH" crossorigin="anonymous">
	<style>
		.katex { font-size: 1.4em !important; }
	</style>
  <style media="print">.is-hidden-print{display:none !important}</style>
<meta property="og:title" content="Identify the Language of Text using Python">
  <meta property="og:description" content="Learn how to predict the language of a given piece of text using Natural Language Processing.">
<meta property="og:url" content="https://amitness.com/2019/07/identify-text-language-python/">
    <meta property="og:image" content="https://amitness.com/images/google_translate_popup.png">
    <meta name="twitter:image:alt" content="Amit Chaudhary">
<meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:creator" content="@amitness">
  <meta name="twitter:site" content="@amitness">
    <meta property="twitter:image" content="https://amitness.com/images/google_translate_popup.png">
<meta property="og:site_name" content="Amit Chaudhary">
<meta property="og:type" content="article">
  <meta property="article:published_time" content="2019-07-15T10:44:00+05:45">
  <meta property="article:modified_time" content="2019-08-03T12:44:00+05:45">
    <meta property="article:tag" content="fasttext">
    <meta property="article:tag" content="language">
  <meta property="article:section" content="nlp">
</head>

<body id="index" class="home">
<header class="hero is-success">
  <div class="hero-head">
    <div class="container">
      <nav class="navbar">
        <div class="navbar-brand">
          <a class="navbar-item title is-3"
             href="https://amitness.com/">amitness</a>
        </div>
      </nav>
    </div>
  </div>
</header>

<nav class="navbar has-shadow is-hidden-print">
  <div class="container">
    <div class="navbar-center"></div>
    <span id="navToggle" class="navbar-burger">
      <span></span>
      <span></span>
      <span></span>
    </span>
    <div id="navMenu" class="navbar-menu">
        <div class="navbar-end">
            <a class="navbar-item is-tab" href="/about/">about</a>
            <a class="navbar-item is-tab" href="/archives">archive</a>
            <a class="navbar-item is-tab" href="/contact/">contact</a>
        </div>
    </div>
  </div>
</nav>

<div class="container">
  <div class="section columns">
    <div class="column is-three-quarters-desktop is-two-thirds-tablet">
<section id="content" class="body">
  <article>
    <h1 class="title">
      <a href="https://amitness.com/2019/07/identify-text-language-python/" rel="bookmark"
         title="Permalink to Identify the Language of Text using Python" class='article-title'>Identify the Language of Text using&nbsp;Python</a></h1>
<footer class="post-info">
  <abbr class="published" title="2019-07-15T10:44:00+05:45">
    Published <span class="is-info">July 15, 2019</span>
    in nlp
  </abbr>

</footer>    <div class="section"><p>Text Language Identification is the process of predicting the language of a given a piece of text. You might have encountered it when Chrome shows a popup to translate a webpage when it detects that the content is not in English. Behind the scenes, Chrome is using a model to predict the language of text used on a&nbsp;webpage.</p>
<p><img alt="Google Translate Popup on Chrome" src="/images/google_translate_popup.png"></p>
<p>When working with a dataset for <span class="caps">NLP</span>,  the corpus may contain a mixed set of languages. Here, language identification can be useful to either filter out a few languages or to translate the corpus to a single language and then use for your downstream&nbsp;tasks.</p>
<p>In this post, I will demonstrate how to use the Fasttext library for language&nbsp;identification.</p>
<h2 id="facebooks-fasttext-library">Facebook&#8217;s Fasttext&nbsp;library</h2>
<p><img alt="Fasttext Logo" src="/images/fastText_logo.png"> </p>
<p><a href="https://fasttext.cc/">Fasttext</a> is an open-source library in Python for word embeddings and text classification. It is built for production use rather than research and hence is optimized for performance and size. It extends the <a href="https://en.wikipedia.org/wiki/Word2vec">Word2Vec</a> model with ideas such as using <a href="https://arxiv.org/abs/1607.04606">subword information</a> and <a href="https://arxiv.org/abs/1612.03651">model compression</a>.</p>
<p>For our purpose of language identification, we can use the pre-trained models provided by fastText. The model was trained on a dataset drawn from <a href="https://www.wikipedia.org/">Wikipedia</a>, <a href="https://tatoeba.org/eng/">Tatoeba</a>, and <a href="http://nlp.ffzg.hr/resources/corpora/setimes/">SETimes</a>. The basic idea is to prepare a training data of (text, language) pairs and then train a classifier on&nbsp;it.</p>
<p><img alt="Language Training Data Example" src="/images/lang_training_data.png"> </p>
<p>The benchmark shows that the pre-trained models are better than <a href="https://github.com/saffsd/langid.py">langid.py</a>, another popular language identification tool. Fasttext has better accuracy and also the inference time is very fast. It supports a wide variety of languages including French, German, English, Spanish,&nbsp;Chinese.</p>
<p><img alt="Benchmarks of Fasttext vs langid" src="/images/fasttext_benchmark.png"></p>
<h2 id="steps">Steps</h2>
<ul>
<li>Install the <code>Fasttext</code> library using&nbsp;pip.</li>
</ul>
<div class="highlight"><pre><span></span>pip install fasttext
</pre></div>


<ul>
<li>There are two versions of the pre-trained models. Choose the model which fits your memory and space&nbsp;requirements:</li>
<li><a href="https://dl.fbaipublicfiles.com/fasttext/supervised-models/lid.176.bin">lid.176.bin</a>: faster and slightly more accurate but <span class="caps">126MB</span> in&nbsp;size</li>
<li>
<p><a href="https://dl.fbaipublicfiles.com/fasttext/supervised-models/lid.176.ftz">lid.176.ftz</a>: a compressed version of the model, with a file size of&nbsp;917kB</p>
</li>
<li>
<p>Download the pre-trained model from Fasttext to some location. You&#8217;ll need to specify this location later in the code. In our example, we download it to the /tmp&nbsp;directory. </p>
</li>
</ul>
<div class="highlight"><pre><span></span>wget -O /tmp/lid.176.bin https://dl.fbaipublicfiles.com/fasttext/supervised-models/lid.176.bin
</pre></div>


<ul>
<li>Now, we import fasttext and then load the model from the pretrained path we downloaded&nbsp;earlier.</li>
</ul>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fasttext</span>

<span class="n">PRETRAINED_MODEL_PATH</span> <span class="o">=</span> <span class="s1">&#39;/tmp/lid.176.bin&#39;</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">fasttext</span><span class="o">.</span><span class="n">load_model</span><span class="p">(</span><span class="n">PRETRAINED_MODEL_PATH</span><span class="p">)</span>
</pre></div>


<ul>
<li>Let&#8217;s take an example sentence in French which means &#8216;I eat food&#8217;. To detect it&#8217;s language, just pass a list of sentences to the predict function. The sentences should be in the <span class="caps">UTF</span>-8&nbsp;format.</li>
</ul>
<p><img alt="French to English Translation Training Data" src="/images/french_to_english_translation.png"> </p>
<div class="highlight"><pre><span></span><span class="n">sentences</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;je mange de la nourriture&#39;</span><span class="p">]</span>
<span class="n">predictions</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">sentences</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">predictions</span><span class="p">)</span>

<span class="c1"># ([[&#39;__label__fr&#39;]], array([[0.96568173]]))</span>
</pre></div>


<ul>
<li>
<p>The model returns back two tuples back. One of them is an array of language labels and the other is the confidence for each sentence. Here &#8216;fr&#8217; is the <span class="caps">ISO</span> 639 code for French. The model is 96.56% confident that the language is&nbsp;French.</p>
</li>
<li>
<p>Fasttext returns the <span class="caps">ISO</span> code for the most probable one among the 170 languages. You can refer to the page on <a href="https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes"><span class="caps">ISO</span> 639</a> codes to find language for each&nbsp;symbol.</p>
</li>
</ul>
<div class="highlight"><pre><span></span>af als am an ar arz as ast av az azb ba bar bcl be bg bh bn bo bpy br bs bxr ca cbk ce ceb ckb co cs cv cy da de diq dsb dty dv el eml en eo es et eu fa fi fr frr fy ga gd gl gn gom gu gv he hi hif hr hsb ht hu hy ia id ie ilo io is it ja jbo jv ka kk km kn ko krc ku kv kw ky la lb lez li lmo lo lrc lt lv mai mg mhr min mk ml mn mr mrj ms mt mwl my myv mzn nah nap nds ne new nl nn no oc or os pa pam pfl pl pms pnb ps pt qu rm ro ru rue sa sah sc scn sco sd sh si sk sl so sq sr su sv sw ta te tg th tk tl tr tt tyv ug uk ur uz vec vep vi vls vo wa war wuu xal xmf yi yo yue zh
</pre></div>


<ul>
<li>To programmatically convert language symbols back to the language name, you can use <a href="https://pypi.org/project/pycountry/">pycountry</a> package. Install the package using&nbsp;pip.</li>
</ul>
<div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">pycountry</span>
</pre></div>


<ul>
<li>Now, pass the symbol to pycountry and you will get back the language&nbsp;name.</li>
</ul>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pycountry</span> <span class="kn">import</span> <span class="n">languages</span>

<span class="n">language_name</span> <span class="o">=</span> <span class="n">languages</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">alpha_2</span><span class="o">=</span><span class="s1">&#39;fr&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">name</span>
<span class="k">print</span><span class="p">(</span><span class="n">language_name</span><span class="p">)</span>
<span class="c1"># french</span>
</pre></div></div>
    <section>
        <p id="post-share-links">
            Share on:
            <a href="https://twitter.com/intent/tweet?text=Identify%20the%20Language%20of%20Text%20using%C2%A0Python&url=https%3A//amitness.com/2019/07/identify-text-language-python/&via=amitness&hashtags=fasttext,language" target="_blank" title="Share on Twitter" style="color: #0084b4">Twitter</a>
            |
            <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A//amitness.com/2019/07/identify-text-language-python/" target="_blank" title="Share on Facebook" style="color: #3B5998">Facebook</a>
            |
            <a href="mailto:?subject=Identify%20the%20Language%20of%20Text%20using%C2%A0Python&amp;body=https%3A//amitness.com/2019/07/identify-text-language-python/" target="_blank" title="Share via Email" style="color: #d34836">Email</a>
        </p>
    </section>
    <div class="comments">
      <div id="disqus_thread"></div>
      <script type="text/javascript">
        var disqus_shortname = 'amit-chaudharys-blog';
        var disqus_identifier = '2019/07/identify-text-language-python/';
        var disqus_url = 'https://amitness.com/2019/07/identify-text-language-python/';
        (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//amit-chaudharys-blog.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
      </script>
      <noscript>Please enable JavaScript to view the comments.</noscript>
    </div>

  </article>
</section>

<script type="application/ld+json">
  {"headline": "Identify the Language of Text using&nbsp;Python", "description": "Learn how to predict the language of a given piece of text using Natural Language\u00a0Processing.", "datePublished": "2019-07-15T10:44:00+05:45", "@context": "http://schema.org", "@type": "BlogPosting", "author": {"@type": "Person", "name": "Amit Chaudhary"}, "mainEntityOfPage": {"@type": "WebPage", "@id": "https://amitness.com/2019/07/identify-text-language-python/"}, "dateModified": "2019-08-03T12:44:00+05:45", "image": {"@type": "ImageObject", "url": "/images/google_translate_popup.png"}, "articleSection": "nlp"}
</script>
    </div>

    <div class="column is-one-quarter-desktop is-one-third-tablet is-hidden-print">
      <aside class="menu">
<div id="mc_embed_signup">
    <form
            action="https://feedburner.google.com/fb/a/mailverify"
            method="post" id="mc-embedded-subscribe-form"
            name="mc-embedded-subscribe-form" class="validate" target="popupwindow"
            onsubmit="window.open('https://feedburner.google.com/fb/a/mailverify?uri=amitness', 'popupwindow', 'scrollbars=yes,width=550,height=520');return true">

        <h2 class="menu-label">Mailing List</h2>

        <div id="mc_embed_signup_scroll">
            <div class="field mc-field-group">
                <label for="mce-EMAIL" class="label is-small">Email</label>
                <div class="field-body">
                    <div class="field">
                        <p class="control has-icons-left">
                            <input type="text" name="email" class="input required email is-small"
                                   id="mce-EMAIL" placeholder="Email address"/>
                            <input type="hidden" value="amitness" name="uri"/>
                            <input type="hidden" name="loc" value="en_US"/>
                            <span class="icon is-small is-left">
              <i class="fa fa-envelope"></i>
            </span>
                        </p>
                    </div>
                </div>
            </div>
            <div class="field is-grouped">
                <p class="control">
                    <input type="submit" name="subscribe" value="Subscribe"
                           class="button is-small is-success" id="mc-embedded-subscribe">
                <p>
                </p>
            </div>

        </div>
    </form>
</div><p class="menu-label">Social</p>
<ul class="menu-list">
    <li><a href="https://github.com/amitness">
      <span class="icon is-small">
          <i class="fa fa-github fa-fw"></i>
      </span>
      <span class="link-text">GitHub</span>
    </a></li>
    <li><a href="https://twitter.com/amitness">
      <span class="icon is-small">
          <i class="fa fa-twitter fa-fw"></i>
      </span>
      <span class="link-text">Twitter</span>
    </a></li>
    <li><a href="https://np.linkedin.com/in/amitness">
      <span class="icon is-small">
          <i class="fa fa-linkedin fa-fw"></i>
      </span>
      <span class="link-text">Linkedin</span>
    </a></li>
    <li><a href="mailto:meamitkc@gmail.com">
      <span class="icon is-small">
          <i class="fa fa-envelope fa-fw"></i>
      </span>
      <span class="link-text">Email</span>
    </a></li>
    <li><a href="/atom.xml">
      <span class="icon is-small">
          <i class="fa fa-globe fa-fw"></i>
      </span>
      <span class="link-text">Feed</span>
    </a></li>


</ul>        <br>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Right Sidebar -->
<ins class="adsbygoogle"
    style="display:block"
    data-ad-client="ca-pub-7848839318244183"
    data-ad-slot="6944746094"
    data-ad-format="auto"
    data-full-width-responsive="true"></ins>
<script>
    (adsbygoogle = window.adsbygoogle || []).push({});
</script>      </aside>
    </div>
  </div>
</div>

<footer class="footer">
  <div class="container has-text-centered">
    <div class="credits">
      <span>Copyright &copy; 2020 Amit Chaudhary
    </div>
  </div>
</footer>

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-98232022-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = 'https://ssl.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
<script type="text/javascript">
    var disqus_shortname = 'amit-chaudharys-blog';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'https://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<script data-ad-client="ca-pub-7848839318244183" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script type="text/javascript">
  document.getElementById('navToggle').addEventListener('click', function () {
    var nav = document.getElementById('navMenu');
    var className = nav.getAttribute('class');
    if (className == 'navbar-menu') {
      nav.className = 'navbar-menu is-active';
    } else {
      nav.className = 'navbar-menu';
    }
  });
</script>
</body>
</html>